<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>JASON TEST DATA</title>
      <script id="resturant-template" type="text/x-handlebars-template">

        <article class="clearfix" rst-image= "{{this.thumb_url}}" data-category="{{category}}">
  
          <header>
  
            <h1>{{this.title}}</h1>
            <h1>{{this.name}}</h1>
            <h1>{{this.title}}</h1>
            <h1>{{this.title}}</h1>
            <h1>{{this.price_range}}</h1>
            <h1>{{this.rating_text}}</h1>
           
            
  
            <div class="byline">
  
  

</head>
<body>
    <div id="coords"></div>


    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.11/handlebars.min.js"></script>
        <script>
            var est = '',
                userCoord = '';
            navigator.geolocation.getCurrentPosition(function(position) {
                console.log('position.coords.latitude',position.coords.latitude,'position.coords.longitude',position.coords.longitude);
              userCoord = {
                  long: position.coords.longitude,
                  lat: position.coords.latitude
              }
              console.log('userCoord lat',userCoord.lat,'userCoord long',userCoord.long);
              $.post('http://localhost:3000/api/v2.1/establishments',userCoord)
                .then(function(data){
                    est = JSON.parse(data)
                    console.log(est.establishments)
                })
                .catch(function(err){ console.error(err)})
            });
          </script>
</body>
</html>
